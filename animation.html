<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Animation</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Open+Sans:wght@300;400&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        p {
            font-family: 'Open Sans', sans-serif;
            color: #999; /* Light grey color */
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .section {
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .floating-img {
            width: 100%;
            height: auto;
            max-width: 250px;
            display: block;
            position: absolute;
            top: 0;
            margin: 0 auto;
            opacity: 1;
        }



        /* Responsive adjustments */
        @media (max-width: 1200px) {
            h1 {
                font-size: 2.2rem;
            }
        }

        @media (max-width: 992px) {
            h1 {
                font-size: 2rem;
            }
        }

        @media (max-width: 768px) {
            .floating-img {
                max-width: 300px;
            }

            h1 {
                font-size: 1.8rem;
            }

            p {
                font-size: 0.9rem;
            }
        }

        @media (max-width: 576px) {
            h1 {
                font-size: 1.5rem;
            }

            p {
                font-size: 0.8rem;
            }

            .floating-img {
                max-width: 250px;
            }
        }

        .content-area h1 {
            font-weight: 600;
           margin-bottom: 20px;
            font-size: 3.5rem;
            line-height: 4.8rem;
            overflow: hidden; /* Ensures text is hidden during animation */
            white-space: nowrap; /* Keeps text in one line */
      
        }

        #imageDiv2 img {
            width: 2000px;
        }
    </style>
    <!-- Include GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
</head>

<body>

    <section class="section" id="section1">
        <div class="container">
            <div class="row">
                <div class="col-12 col-md-6 d-flex align-items-center justify-content-center">
                    <div class="content-area">
                        <h1 id="heading1">Digital Marketing</h1>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Doloremque quam expedita, quae, repellat dolorum fugiat quaerat harum fugit maiores voluptate nobis esse eveniet saepe. Ipsa ut placeat, quaerat voluptas labore doloremque tempore odio? Non quos quis debitis libero commodi perspiciatis veniam rerum beatae, mollitia nobis perferendis assumenda, ut ratione cum repudiandae et, incidunt eveniet dolorum quo? Ullam beatae sint nisi?</p>
                    </div>
                </div>
                <div class="col-12 col-md-6 image-div" id="imageDiv1"></div>
            </div>
        </div>
    </section>
    
    <section class="section" id="section2">
        <div class="container">
            <div class="row flex-row-reverse">
                <div class="col-12 col-md-6 d-flex align-items-center justify-content-center">
                    <div class="content-area">
                        <h1 id="heading2">What is Lorem Ipsum?</h1>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Doloremque quam expedita, quae, repellat dolorum fugiat quaerat harum fugit maiores voluptate nobis esse eveniet saepe. Ipsa ut placeat, quaerat voluptas labore doloremque tempore odio? Non quos quis debitis libero commodi perspiciatis veniam rerum beatae, mollitia nobis perferendis assumenda, ut ratione cum repudiandae et, incidunt eveniet dolorum quo? Ullam beatae sint nisi?</p>
                    </div>
                </div>
                <div class="col-12 col-md-6 image-div" id="imageDiv2"></div>
            </div>
        </div>
    </section>
    
    <section class="section" id="section3">
        <div class="container">
            <div class="row">
                <div class="col-12 col-md-6 d-flex align-items-center justify-content-center">
                    <div class="content-area">
                        <h1 id="heading3">What is Lorem Ipsum?</h1>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Doloremque quam expedita, quae, repellat dolorum fugiat quaerat harum fugit maiores voluptate nobis esse eveniet saepe. Ipsa ut placeat, quaerat voluptas labore doloremque tempore odio? Non quos quis debitis libero commodi perspiciatis veniam rerum beatae, mollitia nobis perferendis assumenda, ut ratione cum repudiandae et, incidunt eveniet dolorum quo? Ullam beatae sint nisi?</p>
                    </div>
                </div>
                <div class="col-12 col-md-6 image-div" id="imageDiv3"></div>
            </div>
        </div>
    </section>
    

    <script>
        const sections = document.querySelectorAll('.section');
        const floatingImage = document.createElement('img');
        floatingImage.src = "iphone.avif";
        floatingImage.classList.add('floating-img');
        document.body.appendChild(floatingImage);

        const imageSources = [
            "iphone.avif", // Section 1
            "iphone2.avif", // Section 2
           "iphone.avif"
        ];

        let currentImageIndex = 0;

  // Change image when entering the section
  function changeImage(index) {
        if (currentImageIndex !== index) {
            currentImageIndex = index;

            gsap.to(floatingImage, {
                opacity: 0,
                duration: 0.5,
                onComplete: () => {
                    floatingImage.src = imageSources[index];
                    
                    // Adjust the width for the specific image in Section 2
                    if (index === 1) {
                        gsap.set(floatingImage, { width: "200px" }); // Set custom width for Section 2
                    } else {
                        gsap.set(floatingImage, { width: "250px" }); // Default width for other sections
                    }

                    gsap.to(floatingImage, { opacity: 1, duration: 0.5 });
                }
            });
        }
    }


        // Function for split text animation
        function splitTextAnimation(headingElement) {
            const text = headingElement.innerText.split('');
            headingElement.innerHTML = '';

            text.forEach(char => {
                const span = document.createElement('span');
                span.innerText = char;
                span.style.display = 'inline-block';
                headingElement.appendChild(span);
            });

            const spans = headingElement.querySelectorAll('span');

            gsap.from(spans, {
                opacity: 0,
                y: 50,
                stagger: 0.1,
                duration: 0.5,
                ease: "back.out(1.7)",
            });
        }

        // Intersection Observer to detect when sections come into view
        const observerOptions = {
            root: null, // Observe based on viewport
            threshold: 0.3 // Trigger when 30% of the section is visible
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const sectionIndex = Array.from(sections).indexOf(entry.target);
                    changeImage(sectionIndex);
                    splitTextAnimation(entry.target.querySelector('h1'));
                }
            });
        }, observerOptions);

        sections.forEach(section => {
            observer.observe(section);
        });

// GSAP animation function for parallax movement
function moveImageAccordingToScroll() {
    const scrollPosition = window.scrollY;
    const windowHeight = window.innerHeight;
    const totalHeight = document.body.scrollHeight - windowHeight;
    const sectionHeight = totalHeight / (sections.length - 1);

    const currentSectionIndex = Math.floor(scrollPosition / sectionHeight);
    const nextSectionIndex = Math.min(currentSectionIndex + 1, sections.length - 1);

    const startSection = sections[currentSectionIndex];
    const endSection = sections[nextSectionIndex];

    const startRect = startSection.querySelector('.image-div').getBoundingClientRect();
    const endRect = endSection.querySelector('.image-div').getBoundingClientRect();

    let startY, startX, endY, endX;

    // Special case for the first section to be 100px from the top
    if (currentSectionIndex === 0) {
        startY = 90; // 100px from the top for the first section
        startX = startRect.left + window.scrollX + (startRect.width / 2) - (floatingImage.offsetWidth / 2);
    } else {
        startY = startRect.top + window.scrollY;
        startX = startRect.left + window.scrollX + (startRect.width / 2) - (floatingImage.offsetWidth / 2);
    }

    endY = endRect.top + window.scrollY;
    endX = endRect.left + window.scrollX + (endRect.width / 2) - (floatingImage.offsetWidth / 2);

    const progress = (scrollPosition % sectionHeight) / sectionHeight;

    const currentY = startY + (endY - startY) * progress;
    const currentX = startX + (endX - startX) * progress;

    gsap.to(floatingImage, {
        top: currentY,
        left: currentX,
        duration: 0.1,
        ease: "linear"
    });
}

window.addEventListener('scroll', moveImageAccordingToScroll);
moveImageAccordingToScroll();
    </script>

    <!-- Bootstrap 5 JS (Optional if you need Bootstrap JS functionalities) -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js"></script>
</body>

</html>
